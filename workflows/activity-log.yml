name: Update Activity Log

on:
  # æ¯å¤© UTC 00:00 åŸ·è¡Œä¸€æ¬¡ (æ’ç¨‹å¼·åŒ–é»ä¹‹ä¸€)
  schedule:
    - cron: '0 0 * * *'
  # ä¹Ÿå¯ä»¥åœ¨æ¯æ¬¡ push å¾ŒåŸ·è¡Œ (ç”¨æ–¼æ¸¬è©¦)
  # push:
  #   branches:
  #     - main
  # æ‰‹å‹•è§¸ç™¼
  workflow_dispatch:

jobs:
  update-log:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      # ä½¿ç”¨ TheDanniCraft/activity-log action
      - uses: TheDanniCraft/activity-log@v1.0.1
        with:
          # å‚³å…¥ Step B å»ºç«‹çš„ Secret TOKEN
          GITHUB_TOKEN: ${{ secrets.TOKEN }}
          # é è¨­çš„æ—¥èªŒæ¨™é¡Œ
          log_title: 'æˆ‘çš„æœ€æ–°æ´»å‹•'
          # é¸æ“‡æ€§ï¼šæŒ‡å®šè¦æ‹‰å–æ´»å‹•çš„çµ„ç¹”æˆ–ä½¿ç”¨è€…ï¼Œé è¨­ç‚ºç¨‹å¼åº«æ“æœ‰è€…
          # user_id: 'æ‚¨çš„GitHubä½¿ç”¨è€…åç¨±' 

      - name: Commit and Push Update
        run: |
          # æª¢æŸ¥æ˜¯å¦æœ‰è®Šæ›´
          if [[ -n "$(git status --porcelain)" ]]; then
            git config user.name github-actions
            git config user.email github-actions@github.com
            git add README.md
            git commit -m "ğŸ¤– docs: Auto update activity log [skip ci]"
            git push
          else
            echo "No changes to commit."
          fi
